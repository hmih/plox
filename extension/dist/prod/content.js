"use strict";(()=>{var a={SYNC:0,UPDATE:1,RETRY:2},s={PROCESS:4,UPDATE:5,RETRY:6},r=(t,...e)=>{};var l=t=>{t.onmessage=e=>{let n=e.data;if(n.type===a.SYNC){let{handle:o}=n;typeof chrome<"u"&&chrome.storage&&chrome.storage.local.get([`cache:${o}`],d=>{let c=d[`cache:${o}`];c?(r(`Cache hit for ${o}`),t.postMessage({type:a.UPDATE,handle:o,flag:c.flag})):(r(`Requesting lookup for ${o}`),chrome.runtime.sendMessage({action:s.PROCESS,handle:o,elementId:"graphql-injected"}))})}},chrome.runtime.onMessage.addListener(e=>{e.action===s.UPDATE?(r(`Received update for ${e.handle}`),t.postMessage({type:a.UPDATE,handle:e.handle??"",flag:e.flag})):e.action===s.RETRY&&t.postMessage({type:a.RETRY,handle:e.handle})})},i=()=>{let e=Object.getOwnPropertySymbols(document).find(n=>n.description==="x-compat-handshake"||n.toString().includes("x-compat-handshake"));if(e){let n=document[e];if(n&&typeof n.connect=="function"){let o=new MessageChannel;return n.connect(o.port2),l(o.port1),!0}}return!1},f=()=>{if(i())return;let t=setInterval(()=>{i()&&clearInterval(t)},50);setTimeout(()=>clearInterval(t),5e3)};f();})();
